"use strict";(self.webpackChunkRAMN_docs=self.webpackChunkRAMN_docs||[]).push([["365"],{3240:function(e,r,n){n.r(r),n.d(r,{default:()=>a});var i=n(5893),s=n(65);function t(e){let r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",ul:"ul",li:"li",h3:"h3",h4:"h4",div:"div",h5:"h5",pre:"pre",code:"code"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.h1,{id:"简介",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#简介",children:"#"}),"简介"]}),"\n",(0,i.jsxs)(r.p,{children:["本指南深入介绍了 RAMN 及其使用方法，可用于了解汽车系统，并为参加汽车类夺旗比赛（CTF）等活动做好准备。请先查阅",(0,i.jsx)(r.a,{href:"/docs/quickstart.html#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97",children:"快速入门指南 "}),",以获得总体概览。"]}),"\n",(0,i.jsx)(r.p,{children:"现代汽车网络通常由多个电子控制单元（ECU）组成，这些 ECU 通过各种通信协议连接到一个公共网络，例如控制器局域网（CAN）、带灵活数据速率的 CAN（CAN FD）以及本地互连网络（LIN）。RAMN 是一组简单的印刷电路板（PCB），可模拟此类汽车网络，其中四个 ECU 连接到一个公共的 CAN FD 总线。尽管其复杂程度不及真实车辆，但它可以作为一个平台，帮助用户轻松学习和实验汽车系统。"}),"\n",(0,i.jsxs)(r.h2,{id:"ramn-硬件",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ramn-硬件",children:"#"}),"RAMN 硬件"]}),"\n",(0,i.jsx)(r.p,{children:"RAMN 由“主板”和“扩展模块”组成。扩展模块并非严格必需，但有助于实现物理交互。RAMN 包含四个 ECU：ECU A、ECU B、ECU C 和 ECU D。每个 ECU 均可通过主板上的 PCB 标识进行识别。"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:"/userguide/simple_setup_annotated.jpg",alt:""})}),"\n",(0,i.jsxs)(r.p,{children:["RAMN 的硬件设计文件已在 ",(0,i.jsx)(r.a,{href:"https://github.com/ToyotaInfoTech/RAMN/tree/main/hardware",rel:"noopener noreferrer",target:"_blank",children:"GitHub 上提供 "}),"。有关硬件的详细信息，请参阅 ",(0,i.jsx)(r.a,{href:"/docs/hardware.html",children:"硬件"})," 部分。"]}),"\n",(0,i.jsx)(r.p,{children:"在粗暴操作过程中，点烟器开关和转向电位器的盖子可能会脱落，请务必注意不要丢失。同时也要小心屏幕，它相当脆弱。"}),"\n",(0,i.jsxs)(r.h2,{id:"ramn-软件",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ramn-软件",children:"#"}),"RAMN 软件"]}),"\n",(0,i.jsxs)(r.p,{children:["每个 ECU 的运行均依赖于 STM32L5 微控制器（STM32L552 或 STM32L562）。STM32L552/562 参考手册可在此处获取：",(0,i.jsx)(r.a,{href:"https://www.st.com/resource/en/reference_manual/dm00346336-stm32l552xx-and-stm32l562xx-advanced-arm-based-32-bit-mcus-stmicroelectronics.pdf",rel:"noopener noreferrer",target:"_blank",children:" 点击这里 "}),"。"]}),"\n",(0,i.jsxs)(r.p,{children:["RAMN 的源代码同样已在 ",(0,i.jsx)(r.a,{href:"https://github.com/ToyotaInfoTech/RAMN/tree/main/firmware",rel:"noopener noreferrer",target:"_blank",children:"GitHub 上提供 "}),"。有关软件的详细信息，请参阅 ",(0,i.jsx)(r.a,{href:"/docs/firmware.html",children:"固件"})," 部分。"]}),"\n",(0,i.jsxs)(r.p,{children:["所有 ECU 共用同一套源代码，仅通过预处理器变量来区分各个 ECU（从 TARGET_ECUA 到 TARGET_ECUD，定义于 ramn_config.h 中）。使用 ",(0,i.jsx)(r.a,{href:"https://github.com/ToyotaInfoTech/RAMN/tree/main/scripts/build",rel:"noopener noreferrer",target:"_blank",children:"构建脚本"}),"可一次性为所有 ECU 编译源代码，但首先需要安装 ",(0,i.jsx)(r.a,{href:"https://www.st.com/en/development-tools/stm32cubeide.html",rel:"noopener noreferrer",target:"_blank",children:"STM32CubeIDE"}),"。"]}),"\n",(0,i.jsxs)(r.p,{children:["ECU 可以通过三种接口之一进行刷写（参见",(0,i.jsx)(r.a,{href:"/docs/hardware/flashing.html#%E5%9B%BA%E4%BB%B6%E5%88%B7%E5%86%99",children:"固件刷写"}),"）。STM32 嵌入式引导程序接口速度最快且使用最便捷，仅需通过 USB 连接即可为所有 ECU 重新刷新固件。"]}),"\n",(0,i.jsxs)(r.p,{children:["如果您希望对固件进行调试，则需要一个 JTAG 调试器，例如 ",(0,i.jsx)(r.a,{href:"https://www.st.com/en/development-tools/st-link-v2.html",rel:"noopener noreferrer",target:"_blank",children:"ST-LINK/V2"}),"。"]}),"\n",(0,i.jsxs)(r.h2,{id:"ecu-功能",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#ecu-功能",children:"#"}),"ECU 功能"]}),"\n",(0,i.jsxs)(r.p,{children:["ECU A 配备了一个 USB 端口，可作为 USB 转 CAN/CAN FD 适配器（“slcan”适配器）使用。其他 ECU 则配备传感器和执行器，用作简单的 ECU。因此，通过 USB 将 RAMN 连接到您的计算机，等同于拥有一款 USB 转 CAN 适配器，并将其连接到带有三个 ECU 的车辆的 ",(0,i.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Data_link_connector#OBD-II_diagnostic_connector",rel:"noopener noreferrer",target:"_blank",children:"OBD-II 端口 "}),"。"]}),"\n",(0,i.jsx)(r.p,{children:"ECU B、C 和 D 各自具有一个周期性任务，用于读取物理控制装置的状态，将其状态广播到 CAN 总线上，并更新其输出设备的状态（例如 LCD 屏幕或 LED 指示灯）。"}),"\n",(0,i.jsxs)(r.p,{children:["RAMN 可以通过 ",(0,i.jsx)(r.a,{href:"https://github.com/ToyotaInfoTech/RAMN/tree/main/scripts/carla",rel:"noopener noreferrer",target:"_blank",children:"CARLA 文件夹 "}),"中的脚本连接到驾驶模拟器 ",(0,i.jsx)(r.a,{href:"https://github.com/carla-simulator/carla",rel:"noopener noreferrer",target:"_blank",children:"CARLA"}),"。这使得我们能够观察驾驶模拟器中车辆的行为如何与物理 CAN 总线上不同 ECU 发送的消息相关联。"]}),"\n",(0,i.jsx)(r.p,{children:"ECU 支持标准诊断功能，例如可以使用统一诊断服务（UDS）进行访问："}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"ECU A 在 ID 0x7e0 处接收请求，并在 0x7e8 处响应。"}),"\n",(0,i.jsx)(r.li,{children:"ECU B 在 ID 0x7e1 处接收请求，并在 0x7e9 处响应。"}),"\n",(0,i.jsx)(r.li,{children:"ECU C 在 ID 0x7e2 处接收请求，并在 0x7ea 处响应。"}),"\n",(0,i.jsx)(r.li,{children:"ECU D 在 ID 0x7e3 处接收请求，并在 0x7eb 处进行响应。"}),"\n"]}),"\n",(0,i.jsxs)(r.h2,{id:"分析环境",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#分析环境",children:"#"}),"分析环境"]}),"\n",(0,i.jsx)(r.p,{children:"您只需通过 USB 为主板供电（无论是否连接扩展设备），即可获得一个可用的 CAN 总线。您可以按照任意指南，使用任何您想要的工具来连接到 CAN 总线。如果您没有相关工具，可以参考本指南，其中使用了 RAMN 内置的 slcan 适配器（因此您只需要一块 RAMN 板即可）。"}),"\n",(0,i.jsx)(r.p,{children:"要完整地遵循本指南，您需要安装以下工具："}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["一个终端仿真程序，例如 ",(0,i.jsx)(r.a,{href:"https://teratermproject.github.io/index-en.html",rel:"noopener noreferrer",target:"_blank",children:"TeraTerm"})," 或 ",(0,i.jsx)(r.a,{href:"https://www.putty.org/",rel:"noopener noreferrer",target:"_blank",children:"Putty"}),"。我们建议您 ",(0,i.jsx)(r.a,{href:"https://github.com/TeraTermProject/teraterm/releases",rel:"noopener noreferrer",target:"_blank",children:"下载并安装 TeraTerm"}),"。这将使您能够直接通过 USB 向 ECU A 发送串行命令。"]}),"\n",(0,i.jsxs)(r.li,{children:["适用于 Windows 的 Python 环境，可",(0,i.jsx)(r.a,{href:"https://www.python.org/downloads/windows/",rel:"noopener noreferrer",target:"_blank",children:"在此下载 "}),"。请务必勾选“将 Python 添加到环境变量”（或 PATH）。这将使您能够在 Windows 上直接执行 RAMN 的 Python 脚本。如果您计划使用 CARLA，请确保使用受支持的版本（参见",(0,i.jsx)(r.a,{href:"/docs/scripts/carla.html#%E5%AE%89%E8%A3%85-carla",children:"安装 CARLA"}),")。"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://www.st.com/en/development-tools/stm32cubeprog.html",rel:"noopener noreferrer",target:"_blank",children:"STM32CubeProgrammer"})," 和 ",(0,i.jsx)(r.a,{href:"https://www.st.com/en/development-tools/stm32cubeide.html",rel:"noopener noreferrer",target:"_blank",children:"STM32CubeIDE"}),",仅当您需要修改源代码和/或重新刷新 ECU 时才使用。"]}),"\n",(0,i.jsx)(r.li,{children:"一台 Linux 虚拟机（或原生系统）。这将使您能够使用诸如 can-utils 等开源工具与 RAMN 的 CAN 总线进行交互，并执行 RAMN 的脚本。请按照以下指南进行操作。"}),"\n"]}),"\n",(0,i.jsxs)(r.h3,{id:"准备配备-can-utils-的-linux-机器",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#准备配备-can-utils-的-linux-机器",children:"#"}),"准备配备 can-utils 的 Linux 机器"]}),"\n",(0,i.jsxs)(r.h4,{id:"windows",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#windows",children:"#"}),"Windows"]}),"\n",(0,i.jsxs)(r.p,{children:["在 Windows 系统上，我们建议您安装 VirtualBox 并使用 Linux 发行版镜像。汽车爱好者的一个常见选择是 Kali Linux ",(0,i.jsx)(r.a,{href:"/docs/userguide/ramn_introduction.html#-1-",children:"[ 1 ]"}),"。"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://www.virtualbox.org/wiki/Downloads",rel:"noopener noreferrer",target:"_blank",children:"下载并安装 VirtualBox"}),"。"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://www.kali.org/get-kali/#kali-virtual-machines",rel:"noopener noreferrer",target:"_blank",children:"下载 Kali Linux 预构建的虚拟机 "}),"。"]}),"\n",(0,i.jsxs)(r.li,{children:["使用 ",(0,i.jsx)(r.a,{href:"https://www.7-zip.org/",rel:"noopener noreferrer",target:"_blank",children:"7zip"})," 解压 7z 镜像。"]}),"\n",(0,i.jsx)(r.li,{children:"双击 vbox 文件，使用 VirtualBox 打开。如果遇到 USB 问题，请打开“设置”>“USB”，尝试选择 USB 2.0 或 USB 3.0（虚拟机必须处于关机状态）。"}),"\n",(0,i.jsx)(r.li,{children:"使用用户名 kali（密码 kali）登录。"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"从这里开始，您应该能够按照以下 Linux 说明进行操作。"}),"\n",(0,i.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,i.jsx)(r.div,{className:"rspress-directive-title",children:"脚注"}),(0,i.jsxs)(r.div,{className:"rspress-directive-content",children:[(0,i.jsxs)(r.h5,{id:"-1-",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#-1-",children:"#"}),"[ 1 ]："]}),(0,i.jsx)(r.p,{children:"如果您无法（或不愿）在虚拟机中运行 Linux 以使用 can-utils 工具，我们建议您学习并使用跨平台的 python-can 库，它可在所有（Python）平台上运行，包括 Windows。"})]})]}),"\n",(0,i.jsxs)(r.h4,{id:"linux",children:[(0,i.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#linux",children:"#"}),"Linux"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"打开终端窗口（例如，右键单击桌面并选择“在此处打开终端”）。"}),"\n",(0,i.jsx)(r.li,{children:"输入以下命令以安装 can-utils："}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"sudo apt-get update\r\nsudo apt-get install can-utils\n"})})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,s.ah)(),e.components);return r?(0,i.jsx)(r,Object.assign({},e,{children:(0,i.jsx)(t,e)})):t(e)}let a=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["docs%2Fuserguide%2Framn_introduction.mdx"]={toc:[{id:"ramn-硬件",text:"RAMN 硬件",depth:2},{id:"ramn-软件",text:"RAMN 软件",depth:2},{id:"ecu-功能",text:"ECU 功能",depth:2},{id:"分析环境",text:"分析环境",depth:2},{id:"准备配备-can-utils-的-linux-机器",text:"准备配备 can-utils 的 Linux 机器",depth:3},{id:"windows",text:"Windows",depth:4},{id:"linux",text:"Linux",depth:4}],title:"简介",headingTitle:"简介",frontmatter:{}}}}]);