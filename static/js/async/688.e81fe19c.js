"use strict";(self.webpackChunkRAMN_docs=self.webpackChunkRAMN_docs||[]).push([["688"],{979:function(e,r,n){n.r(r),n.d(r,{default:()=>h});var s=n(5893),i=n(65);function d(e){let r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",strong:"strong",div:"div",img:"img",pre:"pre",code:"code"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"故障排除",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#故障排除",children:"#"}),"故障排除"]}),"\n",(0,s.jsx)(r.p,{children:"本页面包含针对 RAMN 的常见故障排除方法，主要用于解决重新刷写和调试相关的问题。"}),"\n",(0,s.jsxs)(r.h2,{id:"usb-不稳定",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#usb-不稳定",children:"#"}),"USB 不稳定"]}),"\n",(0,s.jsx)(r.p,{children:"如果您遇到 USB 问题，请尝试使用计算机上的其他 USB 端口。如果您通过 USB 集线器连接到 RAMN，请尝试直接将 RAMN 连接到计算机的 USB 端口。"}),"\n",(0,s.jsxs)(r.h2,{id:"预期选项字节",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#预期选项字节",children:"#"}),"预期选项字节"]}),"\n",(0,s.jsx)(r.p,{children:"如果您在重新编程或调试 RAMN 时遇到困难，请使用STM32CubeProgrammer确保选项字节如下所示。"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"ECU A 与 ECU B/C/D 的配置有所不同。"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"ECU A 选项字节的正确配置"})," ："]}),"\n",(0,s.jsxs)(r.div,{className:"rspress-directive warning",children:[(0,s.jsx)(r.div,{className:"rspress-directive-title",children:"警告"}),(0,s.jsx)(r.div,{className:"rspress-directive-content",children:(0,s.jsx)(r.p,{children:"如果 ECU A 没有有效的固件（例如，因编程失败或中断），请勿更新其 Option Bytes。"})})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/firmware/OptionBytes_ECUA.webp",alt:""})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"ECU B/C/D 选项字节的正确配置"})," ："]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:"/firmware/OptionBytes_ECUBCD.webp",alt:""})}),"\n",(0,s.jsxs)(r.p,{children:["在使用 UDS 重新编程时，",(0,s.jsx)(r.strong,{children:"SWAP_BANK"})," 和 ",(0,s.jsx)(r.strong,{children:"DBANK"})," 可能会被修改，但如果您遇到问题，请尝试恢复为默认设置。"]}),"\n",(0,s.jsxs)(r.p,{children:["应将 ",(0,s.jsx)(r.strong,{children:"RDP 选项字节"}),"设置为 ",(0,s.jsx)(r.strong,{children:"0xAA"}),",以确保未启用任何内存保护。"]}),"\n",(0,s.jsx)(r.p,{children:"重置选项字节后，您可能需要重新刷新固件。"}),"\n",(0,s.jsxs)(r.h2,{id:"调试失败",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#调试失败",children:"#"}),"调试失败"]}),"\n",(0,s.jsxs)(r.p,{children:["如果您在使用 STM32CubeIDE 时遇到调试问题，但确定 JTAG 连接正确（例如，您可以使用STM32CubeProgrammer进行连接），请参阅 ",(0,s.jsx)(r.a,{href:"/docs/firmware/customizing_guide.html#%E8%B0%83%E8%AF%95-ramn-%E5%9B%BA%E4%BB%B6",children:"调试 RAMN 固件"}),"。"]}),"\n",(0,s.jsxs)(r.h2,{id:"内存保护不一致",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#内存保护不一致",children:"#"}),"内存保护不一致"]}),"\n",(0,s.jsx)(r.p,{children:"您可以使用 STM32 引导加载程序来启用内存读取和写入保护。同样，您也可以通过修改 RDP 选项字节来启用或禁用内存保护。"}),"\n",(0,s.jsx)(r.p,{children:"如果您使用一种方法启用了保护，而用另一种方法将其移除（例如，您使用 STM32 引导加载程序启用了写保护，但后来又通过 JTAG 移除了读保护），可能会出现问题。此时，微控制器可能看似已解锁，但实际上会拒绝固件重新编程或调试操作。"}),"\n",(0,s.jsxs)(r.p,{children:["如果您怀疑存在此问题（因为您过去曾使用过内存保护功能），请尝试使用 scripts/STBootloader 文件夹中的 canboot.py 脚本运行“读取解锁”和“写入解锁”命令。 ",(0,s.jsx)(r.strong,{children:"如果您的内存保护功能不一致，这些命令可能会返回错误，即使它们实际上已经成功执行。"})]}),"\n",(0,s.jsx)(r.p,{children:"例如，对于 ECU B："}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-c",children:"python canboot.py AUTO B -ru\r\npython canboot.py AUTO B -wu\n"})}),"\n",(0,s.jsxs)(r.h2,{id:"通过-can-重新编程失败",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#通过-can-重新编程失败",children:"#"}),"通过 CAN 重新编程失败"]}),"\n",(0,s.jsxs)(r.p,{children:["如果通过 CAN 重新编程失败，可能是由于外部 CAN 适配器主动使用错误帧破坏通信流量所致（因为它未执行所需的波特率更改）。 ",(0,s.jsx)(r.strong,{children:"在通过 CAN 进行重新编程之前，请确保已关闭和/或拔下所有外部 CAN 适配器。"})]}),"\n",(0,s.jsxs)(r.h2,{id:"驱动程序问题",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#驱动程序问题",children:"#"}),"驱动程序问题"]}),"\n",(0,s.jsxs)(r.p,{children:["意法半导体的 ",(0,s.jsx)(r.a,{href:"https://www.st.com/en/development-tools/stsw-stm32080.html",rel:"noopener noreferrer",target:"_blank",children:"DfuSe 工具"}),"可用于通过 USB 对 ECU A 进行编程（当 ECU A 处于 DFU 模式时）。如果 Windows 通过 USB 将 ECU A 识别为“DFU 在 FS 模式下”，但设备信息显示为“未知”或“不可用”，则可能需要单独安装 STM32 DFU 驱动程序，这些驱动程序位于 DFuse 的安装文件夹中，例如："]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-cmd",children:"C:\\Program Files (x86)\\STMicroelectronics\\Software\\DfuSe v3.0.6\\Bin\\Driver\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,i.ah)(),e.components);return r?(0,s.jsx)(r,Object.assign({},e,{children:(0,s.jsx)(d,e)})):d(e)}let h=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["docs%2Ffirmware%2Fcommon_issues.mdx"]={toc:[{id:"usb-不稳定",text:"USB 不稳定",depth:2},{id:"预期选项字节",text:"预期选项字节",depth:2},{id:"调试失败",text:"调试失败",depth:2},{id:"内存保护不一致",text:"内存保护不一致",depth:2},{id:"通过-can-重新编程失败",text:"通过 CAN 重新编程失败",depth:2},{id:"驱动程序问题",text:"驱动程序问题",depth:2}],title:"故障排除",headingTitle:"故障排除",frontmatter:{}}}}]);